import{c as i,j as r,r as a,K as d,A as c,T as m}from"./chunks/globals-BwWzdTru.js";import{R as u,u as h,a as p}from"./chunks/rate-sheet-editor-DekhF4hY.js";import"./chunks/tooltip-B1JY9yFU.js";function l({config:t}){const n=()=>{window.parent.postMessage({source:"karrio-embed",type:"EVENT",event:"close"},"*")};return r.jsx(d,{host:t.host,token:t.token,admin:t.admin,children:r.jsxs(c,{children:[r.jsx(u,{rateSheetId:t.rateSheetId||"new",onClose:n,preloadCarrier:t.carrier,linkConnectionId:t.connectionId,isAdmin:t.admin,useRateSheet:p,useRateSheetMutation:h}),r.jsx(m,{})]})})}function E(){const[t,n]=a.useState(null);return a.useEffect(()=>{const s=o=>{const{data:e}=o;(e==null?void 0:e.source)==="karrio-host"&&e.type==="INIT"&&n({host:e.host,token:e.token,rateSheetId:e.rateSheetId,carrier:e.carrier,connectionId:e.connectionId,admin:e.admin??!1})};return window.addEventListener("message",s),window.parent.postMessage({source:"karrio-embed",type:"READY"},"*"),()=>window.removeEventListener("message",s)},[]),a.useEffect(()=>{const s=new ResizeObserver(o=>{for(const e of o)window.parent.postMessage({source:"karrio-embed",type:"RESIZE",height:e.contentRect.height},"*")});return s.observe(document.body),()=>s.disconnect()},[]),t?r.jsx(l,{config:t}):r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-400"})})}const f=i(document.getElementById("root"));f.render(r.jsx(E,{}));
