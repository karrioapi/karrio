import{m as R,r as i,j as e,a8 as E,a5 as r,au as X,a7 as w}from"./globals-C95u6hwq.js";import{E as G,P as O}from"./embed-karrio-Blvd9pvd.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],J=R("circle-plus",H);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],W=R("rotate-ccw",Q);function C({value:h={},onChange:a,className:_="",placeholder:F="No metadata configured",emptyStateMessage:L="Add key-value pairs to configure metadata",allowEdit:m=!0,showTypeInference:j=!0,maxHeight:V="300px"}){const[n,c]=i.useState(h),[o,N]=i.useState(""),[k,f]=i.useState(""),[d,$]=i.useState(!1),[M,y]=i.useState(null),[x,u]=i.useState("");i.useEffect(()=>{c(h)},[h]);const p=t=>{if(t==="true")return!0;if(t==="false")return!1;if(t==="null")return null;if(t==="")return"";const s=Number(t);return!isNaN(s)&&isFinite(s)&&t.trim()!==""?s:t},K=t=>t===null?"null":typeof t=="boolean"?"boolean":typeof t=="number"?"number":"string",S=t=>t===null?"bg-gray-100 text-gray-600":typeof t=="boolean"?"bg-blue-100 text-blue-700":typeof t=="number"?"bg-green-100 text-green-700":"bg-purple-100 text-purple-700",b=()=>{if(!o.trim())return;const t=p(k),s={...n,[o]:t};c(s),a==null||a(s),N(""),f("")},A=t=>{const{[t]:s,...l}=n;c(l),a==null||a(l)},B=(t,s)=>{const l=p(s),P={...n,[t]:l};c(P),a==null||a(P)},q=(t,s)=>{y(t),u((s==null?void 0:s.toString())??"")},z=t=>{B(t,x),y(null),u("")},v=()=>{y(null),u("")},I=()=>{c({}),a==null||a({}),N(""),f("")},D=(t,s)=>{t.key==="Enter"&&(t.preventDefault(),s())},T=(t,s)=>{t.key==="Enter"?(t.preventDefault(),z(s)):t.key==="Escape"&&(t.preventDefault(),v())},U=()=>{m&&($(!d),v())},g=Object.keys(n).length>0;return e.jsxs("div",{className:`space-y-4 ${_}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Metadata"}),g&&e.jsxs(E,{variant:"outline",className:"text-xs",children:[Object.keys(n).length," ",Object.keys(n).length===1?"item":"items"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[g&&e.jsxs(r,{type:"button",variant:"ghost",size:"sm",onClick:I,className:"h-7 px-2 text-xs text-slate-500",children:[e.jsx(W,{className:"h-3 w-3 mr-1"}),"Reset"]}),m&&e.jsx(r,{type:"button",variant:"ghost",size:"sm",onClick:U,className:"h-7 px-2 text-xs",children:d?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"h-3 w-3 mr-1"}),"View"]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"h-3 w-3 mr-1"}),"Edit"]})})]})]}),e.jsxs("div",{className:"space-y-2 overflow-auto border rounded-lg p-3 bg-slate-50",style:{maxHeight:V},children:[g?e.jsx("div",{className:"space-y-2",children:Object.entries(n).map(([t,s])=>e.jsxs("div",{className:"bg-white rounded border",children:[M!==t&&e.jsxs("div",{className:"flex items-center gap-2 p-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-slate-700 truncate",children:t}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-sm text-slate-600 break-all",children:(s==null?void 0:s.toString())??"null"}),j&&e.jsx(E,{variant:"secondary",className:`text-xs ${S(s)}`,children:K(s)})]})]}),d&&m&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(r,{type:"button",variant:"ghost",size:"sm",onClick:()=>q(t,s),className:"h-7 px-2",children:e.jsx(O,{className:"h-3 w-3"})}),e.jsx(r,{type:"button",variant:"ghost",size:"sm",onClick:()=>A(t),className:"h-7 px-2 text-red-600 hover:text-red-700",children:e.jsx(X,{className:"h-3 w-3"})})]})]}),d&&M===t&&e.jsx("div",{className:"p-3 bg-slate-50 border-l-4 border-l-blue-500",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm font-medium text-slate-700 mb-2",children:["Editing: ",t]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{value:x,onChange:l=>u(l.target.value),onKeyDown:l=>T(l,t),className:"flex-1 text-sm",placeholder:"Enter value",autoFocus:!0}),j&&x&&e.jsx(E,{variant:"outline",className:`text-xs ${S(p(x))}`,children:K(p(x))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Press Enter to save, Escape to cancel"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{type:"button",variant:"outline",size:"sm",onClick:v,className:"h-7 px-3 text-xs",children:"Cancel"}),e.jsx(r,{type:"button",size:"sm",onClick:()=>z(t),className:"h-7 px-3 text-xs",children:"Save"})]})]})]})})]},t))}):e.jsxs("div",{className:"text-center py-4 text-slate-500",children:[e.jsx("div",{className:"text-sm",children:F}),e.jsx("div",{className:"text-xs mt-1 text-slate-400",children:L})]}),d&&m&&e.jsxs("div",{className:"border-t pt-3 mt-3",children:[e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx(w,{value:o,onChange:t=>N(t.target.value),onKeyDown:t=>D(t,b),placeholder:"Enter key",className:"text-sm"})}),e.jsx("div",{className:"flex-1",children:e.jsx(w,{value:k,onChange:t=>f(t.target.value),onKeyDown:t=>D(t,b),placeholder:"Enter value (auto-typed)",className:"text-sm"})}),e.jsx(r,{type:"button",variant:"outline",size:"sm",onClick:b,disabled:!o.trim(),className:"h-9 px-3",children:e.jsx(J,{className:"h-4 w-4"})})]}),j&&e.jsx("div",{className:"text-xs text-slate-500 mt-2",children:'Values are automatically typed: "true"/"false" → boolean, numbers → number, "null" → null'})]})]})]})}export{C as E};
