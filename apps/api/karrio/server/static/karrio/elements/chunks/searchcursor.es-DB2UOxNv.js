import{a as A}from"./codemirror.es-BwLC14b1.js";import"../devtools.js";import"./globals-BwWzdTru.js";import"./embed-karrio-zFv2Zuju.js";import"./tooltip-B1JY9yFU.js";import"./tabs-CxDYR5aE.js";import"./textarea-DFNymACj.js";var M=Object.defineProperty,g=(F,P)=>M(F,"name",{value:P,configurable:!0});function D(F,P){return P.forEach(function(u){u&&typeof u!="string"&&!Array.isArray(u)&&Object.keys(u).forEach(function(o){if(o!=="default"&&!(o in F)){var L=Object.getOwnPropertyDescriptor(u,o);Object.defineProperty(F,o,L.get?L:{enumerable:!0,get:function(){return u[o]}})}})}),Object.freeze(Object.defineProperty(F,Symbol.toStringTag,{value:"Module"}))}g(D,"_mergeNamespaces");var $={exports:{}};(function(F,P){(function(u){u(A.exports)})(function(u){var o=u.Pos;function L(t){var e=t.flags;return e??(t.ignoreCase?"i":"")+(t.global?"g":"")+(t.multiline?"m":"")}g(L,"regexpFlags");function O(t,e){for(var n=L(t),r=n,a=0;a<e.length;a++)r.indexOf(e.charAt(a))==-1&&(r+=e.charAt(a));return n==r?t:new RegExp(t.source,r)}g(O,"ensureFlags");function R(t){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(t.source)}g(R,"maybeMultiline");function _(t,e,n){e=O(e,"g");for(var r=n.line,a=n.ch,i=t.lastLine();r<=i;r++,a=0){e.lastIndex=a;var l=t.getLine(r),f=e.exec(l);if(f)return{from:o(r,f.index),to:o(r,f.index+f[0].length),match:f}}}g(_,"searchRegexpForward");function B(t,e,n){if(!R(e))return _(t,e,n);e=O(e,"gm");for(var r,a=1,i=n.line,l=t.lastLine();i<=l;){for(var f=0;f<a&&!(i>l);f++){var d=t.getLine(i++);r=r==null?d:r+`
`+d}a=a*2,e.lastIndex=n.ch;var h=e.exec(r);if(h){var s=r.slice(0,h.index).split(`
`),c=h[0].split(`
`),v=n.line+s.length-1,m=s[s.length-1].length;return{from:o(v,m),to:o(v+c.length-1,c.length==1?m+c[0].length:c[c.length-1].length),match:h}}}}g(B,"searchRegexpForwardMultiline");function j(t,e,n){for(var r,a=0;a<=t.length;){e.lastIndex=a;var i=e.exec(t);if(!i)break;var l=i.index+i[0].length;if(l>t.length-n)break;(!r||l>r.index+r[0].length)&&(r=i),a=i.index+1}return r}g(j,"lastMatchIn");function k(t,e,n){e=O(e,"g");for(var r=n.line,a=n.ch,i=t.firstLine();r>=i;r--,a=-1){var l=t.getLine(r),f=j(l,e,a<0?0:l.length-a);if(f)return{from:o(r,f.index),to:o(r,f.index+f[0].length),match:f}}}g(k,"searchRegexpBackward");function I(t,e,n){if(!R(e))return k(t,e,n);e=O(e,"gm");for(var r,a=1,i=t.getLine(n.line).length-n.ch,l=n.line,f=t.firstLine();l>=f;){for(var d=0;d<a&&l>=f;d++){var h=t.getLine(l--);r=r==null?h:h+`
`+r}a*=2;var s=j(r,e,i);if(s){var c=r.slice(0,s.index).split(`
`),v=s[0].split(`
`),m=l+c.length,x=c[c.length-1].length;return{from:o(m,x),to:o(m+v.length-1,v.length==1?x+v[0].length:v[v.length-1].length),match:s}}}}g(I,"searchRegexpBackwardMultiline");var b,y;String.prototype.normalize?(b=g(function(t){return t.normalize("NFD").toLowerCase()},"doFold"),y=g(function(t){return t.normalize("NFD")},"noFold")):(b=g(function(t){return t.toLowerCase()},"doFold"),y=g(function(t){return t},"noFold"));function p(t,e,n,r){if(t.length==e.length)return n;for(var a=0,i=n+Math.max(0,t.length-e.length);;){if(a==i)return a;var l=a+i>>1,f=r(t.slice(0,l)).length;if(f==n)return l;f>n?i=l:a=l+1}}g(p,"adjustPos");function N(t,e,n,r){if(!e.length)return null;var a=r?b:y,i=a(e).split(/\r|\n\r?/);e:for(var l=n.line,f=n.ch,d=t.lastLine()+1-i.length;l<=d;l++,f=0){var h=t.getLine(l).slice(f),s=a(h);if(i.length==1){var c=s.indexOf(i[0]);if(c==-1)continue e;var n=p(h,s,c,a)+f;return{from:o(l,p(h,s,c,a)+f),to:o(l,p(h,s,c+i[0].length,a)+f)}}else{var v=s.length-i[0].length;if(s.slice(v)!=i[0])continue e;for(var m=1;m<i.length-1;m++)if(a(t.getLine(l+m))!=i[m])continue e;var x=t.getLine(l+i.length-1),w=a(x),E=i[i.length-1];if(w.slice(0,E.length)!=E)continue e;return{from:o(l,p(h,s,v,a)+f),to:o(l+i.length-1,p(x,w,E.length,a))}}}}g(N,"searchStringForward");function z(t,e,n,r){if(!e.length)return null;var a=r?b:y,i=a(e).split(/\r|\n\r?/);e:for(var l=n.line,f=n.ch,d=t.firstLine()-1+i.length;l>=d;l--,f=-1){var h=t.getLine(l);f>-1&&(h=h.slice(0,f));var s=a(h);if(i.length==1){var c=s.lastIndexOf(i[0]);if(c==-1)continue e;return{from:o(l,p(h,s,c,a)),to:o(l,p(h,s,c+i[0].length,a))}}else{var v=i[i.length-1];if(s.slice(0,v.length)!=v)continue e;for(var m=1,n=l-i.length+1;m<i.length-1;m++)if(a(t.getLine(n+m))!=i[m])continue e;var x=t.getLine(l+1-i.length),w=a(x);if(w.slice(w.length-i[0].length)!=i[0])continue e;return{from:o(l+1-i.length,p(x,w,x.length-i[0].length,a)),to:o(l,p(h,s,v.length,a))}}}}g(z,"searchStringBackward");function S(t,e,n,r){this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=t,n=n?t.clipPos(n):o(0,0),this.pos={from:n,to:n};var a;typeof r=="object"?a=r.caseFold:(a=r,r=null),typeof e=="string"?(a==null&&(a=!1),this.matches=function(i,l){return(i?z:N)(t,e,l,a)}):(e=O(e,"gm"),!r||r.multiline!==!1?this.matches=function(i,l){return(i?I:B)(t,e,l)}:this.matches=function(i,l){return(i?k:_)(t,e,l)})}g(S,"SearchCursor"),S.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){var e=this.doc.clipPos(t?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(e=o(e.line,e.ch),t?(e.ch--,e.ch<0&&(e.line--,e.ch=(this.doc.getLine(e.line)||"").length)):(e.ch++,e.ch>(this.doc.getLine(e.line)||"").length&&(e.ch=0,e.line++)),u.cmpPos(e,this.doc.clipPos(e))!=0))return this.atOccurrence=!1;var n=this.matches(t,e);if(this.afterEmptyMatch=n&&u.cmpPos(n.from,n.to)==0,n)return this.pos=n,this.atOccurrence=!0,this.pos.match||!0;var r=o(t?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:r,to:r},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(t,e){if(this.atOccurrence){var n=u.splitLines(t);this.doc.replaceRange(n,this.pos.from,this.pos.to,e),this.pos.to=o(this.pos.from.line+n.length-1,n[n.length-1].length+(n.length==1?this.pos.from.ch:0))}}},u.defineExtension("getSearchCursor",function(t,e,n){return new S(this.doc,t,e,n)}),u.defineDocExtension("getSearchCursor",function(t,e,n){return new S(this,t,e,n)}),u.defineExtension("selectMatches",function(t,e){for(var n=[],r=this.getSearchCursor(t,this.getCursor("from"),e);r.findNext()&&!(u.cmpPos(r.to(),this.getCursor("to"))>0);)n.push({anchor:r.from(),head:r.to()});n.length&&this.setSelections(n,0)})})})();var C=$.exports,U=D({__proto__:null,default:C},[$.exports]);export{$ as a,U as s};
