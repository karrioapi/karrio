import{C as m}from"./codemirror.es-DHj8iR0M.js";import{f as j}from"./forEachState.es-D8bf0zSr.js";import{j as g,P as b,Q as O,Y as y,C as N,O as D}from"../devtools.js";import"./globals-D8PkUKNZ.js";import"./loader-circle-CPmrdKrG.js";import"./tabs-CD3r-GU2.js";import"./tooltip-8zu5sLAA.js";import"./embed-karrio-C-TLT-rj.js";import"./textarea-IMUxBBQu.js";var P=Object.defineProperty,p=(n,i)=>P(n,"name",{value:i,configurable:!0});function f(n,i,t){const r=x(t,d(i.string));if(!r)return;const e=i.type!==null&&/"|\w/.test(i.string[0])?i.start:i.end;return{list:r,from:{line:n.line,ch:e},to:{line:n.line,ch:i.end}}}p(f,"hintList");function x(n,i){if(!i)return u(n,o=>!o.isDeprecated);const t=n.map(o=>({proximity:T(d(o.text),i),entry:o}));return u(u(t,o=>o.proximity<=2),o=>!o.entry.isDeprecated).sort((o,s)=>(o.entry.isDeprecated?1:0)-(s.entry.isDeprecated?1:0)||o.proximity-s.proximity||o.entry.text.length-s.entry.text.length).map(o=>o.entry)}p(x,"filterAndSortList");function u(n,i){const t=n.filter(i);return t.length===0?n:t}p(u,"filterNonEmpty");function d(n){return n.toLowerCase().replaceAll(/\W/g,"")}p(d,"normalizeText");function T(n,i){let t=v(i,n);return n.length>i.length&&(t-=n.length-i.length-1,t+=n.indexOf(i)===0?0:.5),t}p(T,"getProximity");function v(n,i){let t,r;const e=[],o=n.length,s=i.length;for(t=0;t<=o;t++)e[t]=[t];for(r=1;r<=s;r++)e[0][r]=r;for(t=1;t<=o;t++)for(r=1;r<=s;r++){const c=n[t-1]===i[r-1]?0:1;e[t][r]=Math.min(e[t-1][r]+1,e[t][r-1]+1,e[t-1][r-1]+c),t>1&&r>1&&n[t-1]===i[r-2]&&n[t-2]===i[r-1]&&(e[t][r]=Math.min(e[t][r],e[t-2][r-2]+c))}return e[o][s]}p(v,"lexicalDistance");m.registerHelper("hint","graphql-variables",(n,i)=>{const t=n.getCursor(),r=n.getTokenAt(t),e=L(t,r,i);return e!=null&&e.list&&e.list.length>0&&(e.from=m.Pos(e.from.line,e.from.ch),e.to=m.Pos(e.to.line,e.to.ch),m.signal(n,"hasCompletion",n,e,r)),e});function L(n,i,t){const r=i.state.kind==="Invalid"?i.state.prevState:i.state,{kind:e,step:o}=r;if(e==="Document"&&o===0)return f(n,i,[{text:"{"}]);const{variableToType:s}=t;if(!s)return;const c=V(s,i.state);if(e==="Document"||e==="Variable"&&o===0){const a=Object.keys(s);return f(n,i,a.map(l=>({text:`"${l}": `,type:s[l]})))}if((e==="ObjectValue"||e==="ObjectField"&&o===0)&&c.fields){const a=Object.keys(c.fields).map(l=>c.fields[l]);return f(n,i,a.map(l=>({text:`"${l.name}": `,type:l.type,description:l.description})))}if(e==="StringValue"||e==="NumberValue"||e==="BooleanValue"||e==="NullValue"||e==="ListValue"&&o===1||e==="ObjectField"&&o===2||e==="Variable"&&o===2){const a=c.type?g(c.type):void 0;if(a instanceof b)return f(n,i,[{text:"{"}]);if(a instanceof O){const l=a.getValues();return f(n,i,l.map(h=>({text:`"${h.name}"`,type:a,description:h.description})))}if(a===y)return f(n,i,[{text:"true",type:y,description:"Not false."},{text:"false",type:y,description:"Not true."}])}}p(L,"getVariablesHint");function V(n,i){const t={type:null,fields:null};return j(i,r=>{switch(r.kind){case"Variable":{t.type=n[r.name];break}case"ListValue":{const e=t.type?N(t.type):void 0;t.type=e instanceof D?e.ofType:null;break}case"ObjectValue":{const e=t.type?g(t.type):void 0;t.fields=e instanceof b?e.getFields():null;break}case"ObjectField":{const e=r.name&&t.fields?t.fields[r.name]:null;t.type=e==null?void 0:e.type;break}}}),t}p(V,"getTypeInfo");
