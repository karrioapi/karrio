function l(o,c){const m=typeof o=="string"?document.querySelector(o):o;if(!m)throw new Error(`[KarrioElements] Container not found: ${o}`);const i={};let n={...c};const s=c.iframeSrc||`${window.location.origin}/static/karrio/elements/ratesheet.html`,r=document.createElement("iframe");r.src=s,r.style.width="100%",r.style.border="none",r.style.minHeight="600px",r.setAttribute("allowtransparency","true");const h=t=>{var d;const{data:e}=t;if((e==null?void 0:e.source)==="karrio-embed")switch(e.type){case"READY":(d=r.contentWindow)==null||d.postMessage({source:"karrio-host",type:"INIT",host:n.host,token:n.token,rateSheetId:n.rateSheetId,carrier:n.carrier,connectionId:n.connectionId,admin:n.admin??!1},"*");break;case"RESIZE":typeof e.height=="number"&&(r.style.height=`${e.height}px`);break;case"EVENT":u(e.event,e.payload);break}};window.addEventListener("message",h),m.appendChild(r);function u(t,...e){(i[t]||[]).forEach(d=>d(...e))}const a={on(t,e){return i[t]||(i[t]=[]),i[t].push(e),a},unmount(){window.removeEventListener("message",h),r.remove()},update(t){var e;n={...n,...t},(e=r.contentWindow)==null||e.postMessage({source:"karrio-host",type:"INIT",host:n.host,token:n.token,rateSheetId:n.rateSheetId,carrier:n.carrier,connectionId:n.connectionId,admin:n.admin??!1},"*")}};return a}function f(o,c){const m=typeof o=="string"?document.querySelector(o):o;if(!m)throw new Error(`[KarrioElements] Container not found: ${o}`);const i={},n=c.iframeSrc||`${window.location.origin}/static/karrio/elements/devtools.html`,s=document.createElement("iframe");s.src=n,s.style.width="100%",s.style.height="100%",s.style.border="none",s.style.minHeight="700px",s.setAttribute("allowtransparency","true");const r=a=>{var e;const{data:t}=a;if((t==null?void 0:t.source)==="karrio-embed")switch(t.type){case"READY":(e=s.contentWindow)==null||e.postMessage({source:"karrio-host",type:"INIT",host:c.host,token:c.token,admin:c.admin??!1,defaultView:c.defaultView},"*");break;case"RESIZE":typeof t.height=="number"&&(s.style.height=`${Math.max(700,t.height)}px`);break;case"EVENT":h(t.event,t.payload);break}};window.addEventListener("message",r),m.appendChild(s);function h(a,...t){(i[a]||[]).forEach(e=>e(...t))}const u={on(a,t){return i[a]||(i[a]=[]),i[a].push(t),u},unmount(){window.removeEventListener("message",r),s.remove()}};return u}function p(o,c){const m=typeof o=="string"?document.querySelector(o):o;if(!m)throw new Error(`[KarrioElements] Container not found: ${o}`);const i={};let n={...c};const s=c.iframeSrc||`${window.location.origin}/static/karrio/elements/template-editor.html`,r=document.createElement("iframe");r.src=s,r.style.width="100%",r.style.border="none",r.style.minHeight="600px",r.setAttribute("allowtransparency","true");const h=t=>{var d;const{data:e}=t;if((e==null?void 0:e.source)==="karrio-embed")switch(e.type){case"READY":(d=r.contentWindow)==null||d.postMessage({source:"karrio-host",type:"INIT",host:n.host,token:n.token,admin:n.admin??!1,templateId:n.templateId},"*");break;case"RESIZE":typeof e.height=="number"&&(r.style.height=`${e.height}px`);break;case"EVENT":u(e.event,e.payload);break}};window.addEventListener("message",h),m.appendChild(r);function u(t,...e){(i[t]||[]).forEach(d=>d(...e))}const a={on(t,e){return i[t]||(i[t]=[]),i[t].push(e),a},unmount(){window.removeEventListener("message",h),r.remove()},update(t){var e;n={...n,...t},(e=r.contentWindow)==null||e.postMessage({source:"karrio-host",type:"INIT",host:n.host,token:n.token,admin:n.admin??!1,templateId:n.templateId},"*")}};return a}function w(o,c){const m=typeof o=="string"?document.querySelector(o):o;if(!m)throw new Error(`[KarrioElements] Container not found: ${o}`);const i={};let n={...c};const s=c.iframeSrc||`${window.location.origin}/static/karrio/elements/connections.html`,r=document.createElement("iframe");r.src=s,r.style.width="100%",r.style.border="none",r.style.minHeight="400px",r.setAttribute("allowtransparency","true");const h=t=>{var d;const{data:e}=t;if((e==null?void 0:e.source)==="karrio-embed")switch(e.type){case"READY":(d=r.contentWindow)==null||d.postMessage({source:"karrio-host",type:"INIT",host:n.host,token:n.token,admin:n.admin??!1,connectionId:n.connectionId,carrier:n.carrier},"*");break;case"RESIZE":typeof e.height=="number"&&(r.style.height=`${e.height}px`);break;case"EVENT":u(e.event,e.payload);break}};window.addEventListener("message",h),m.appendChild(r);function u(t,...e){(i[t]||[]).forEach(d=>d(...e))}const a={on(t,e){return i[t]||(i[t]=[]),i[t].push(e),a},unmount(){window.removeEventListener("message",h),r.remove()},update(t){var e;n={...n,...t},(e=r.contentWindow)==null||e.postMessage({source:"karrio-host",type:"INIT",host:n.host,token:n.token,admin:n.admin??!1,connectionId:n.connectionId,carrier:n.carrier},"*")}};return a}window.KarrioElements={mount:l,mountDevtools:f,mountTemplateEditor:p,mountConnections:w};
